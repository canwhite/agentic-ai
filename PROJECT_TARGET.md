# Novel Agent 项目目标与限制

## 项目概述

基于Agentic AI教程中的多智能体系统架构，创建一个专门用于小说创作的多智能体协作系统。该系统将根据用户提供的大纲、章节提纲、人物设定、场景描述和道具信息，生成具有剧情张力且情节连贯的小说章节。

## 核心目标

### 1. 核心功能目标
- **输入处理**：能够接收并解析小说大纲、单章提纲、人物设定、场景描述、道具信息
- **章节生成**：生成有剧情张力、情节连贯的小说章节
- **质量保证**：确保人物一致性、情节逻辑性、风格统一性
- **灵活性**：支持多种输出格式（纯文本/JSON）根据用户需求

### 2. 质量目标（"三板斧"防崩机制）
- **防"水"**：避免无意义的内容填充，确保每段文字都有推进剧情或塑造人物的作用
- **防崩人设**：防止人物性格和行为崩坏，保持人物设定一致性
- **防OOC**：防止人物行为不符合设定（Out of Character）

### 3. 高级功能目标
- **情感曲线控制**：能够控制章节的情感起伏和节奏
- **风格模仿**：支持模仿特定作者或作品的写作风格
- **多线叙事**：支持多条故事线并行发展
- **伏笔设置**：能够自动设置和跟踪伏笔

## 技术限制与约束

### 1. 架构约束
- **必须使用多智能体协作架构**：用户明确选择此架构模式
- **基于现有Agentic AI教程**：需要借鉴教程中的设计模式和实现方法
- **使用uv进行依赖管理**：项目必须使用uv作为Python包管理器

### 2. 技术栈限制
- **核心依赖**：openai, python-dotenv, pydantic（数据验证）
- **可选框架**：smolagents（根据实现复杂度决定）
- **模型选择**：优先使用GPT-4o-mini等性价比高的模型

### 3. 输入输出约束
- **输入格式**：必须支持结构化数据输入（大纲、人物、场景、道具等）
- **输出格式**：必须灵活支持纯文本和JSON格式，根据用户prompt决定
- **小说类型**：优先支持网络小说/爽文、科幻/奇幻、玄幻类型

## 项目范围边界

### 包含的功能
1. **基础工作流**：从输入解析到章节生成的完整流程
2. **多智能体协作**：6个专门Agent的分工协作
3. **质量检查机制**：连贯性检查和"三板斧"防崩机制
4. **评估体系**：基于教程的客观+主观评估方法
5. **示例和文档**：完整的使用示例和API文档

### 不包含的功能（第一期）
1. **完整小说创作**：仅限单章生成，不包含从大纲到完本的完整流程
2. **可视化界面**：仅提供Python API，不包含Web界面
3. **多语言支持**：仅支持中文创作
4. **实时协作**：不包含多人实时协作功能
5. **版权检测**：不包含抄袭检测或版权保护功能

## 成功标准

### 功能成功标准
1. ✅ 能够根据输入生成连贯的小说章节
2. ✅ 生成的章节具有明显的剧情张力
3. ✅ 人物行为符合设定（无OOC问题）
4. ✅ 情节逻辑连贯，无矛盾
5. ✅ 支持指定输出格式（文本/JSON）

### 技术成功标准
1. ✅ 多智能体架构稳定运行
2. ✅ 各Agent职责清晰，协作顺畅
3. ✅ 错误处理机制完善
4. ✅ 性能可接受（单章生成时间<3分钟）
5. ✅ 代码结构清晰，易于扩展

### 用户体验标准
1. ✅ API设计直观易用
2. ✅ 示例代码完整可运行
3. ✅ 文档清晰详细
4. ✅ 错误信息友好明确
5. ✅ 配置简单（环境变量+配置文件）

## 风险评估与缓解

### 技术风险
1. **多Agent一致性风险**：各Agent输出可能不一致
   - **缓解**：导演Agent统一协调，连贯性检查Agent专门检查

2. **剧情张力不足风险**：生成的章节平淡无奇
   - **缓解**：情节设计Agent专门设计冲突、悬念、情感起伏点

3. **成本控制风险**：LLM API调用成本可能过高
   - **缓解**：使用性价比高的模型，缓存重复内容，并行执行独立任务

### 项目风险
1. **范围蔓延风险**：不断添加新功能导致项目延期
   - **缓解**：明确项目范围边界，第一期只实现核心功能

2. **质量评估风险**：难以客观评估生成质量
   - **缓解**：结合客观指标（一致性检查）和主观评估（LLM裁判）

## 开发优先级

### P0（必须实现）
1. 基础多智能体架构
2. 导演Agent + 情节设计Agent + 人物塑造Agent
3. 基础工作流程
4. "三板斧"防崩机制
5. 纯文本输出

### P1（重要功能）
1. 场景渲染Agent + 文笔优化Agent
2. 连贯性检查Agent
3. JSON格式输出支持
4. 完整评估体系
5. 示例代码和文档

### P2（增强功能）
1. 情感曲线控制
2. 风格模仿
3. 多线叙事支持
4. 伏笔设置
5. 性能优化

## 依赖关系

### 外部依赖
1. **OpenAI API**：核心LLM服务
2. **uv**：Python包管理
3. **pydantic**：数据验证
4. **python-dotenv**：环境变量管理

### 内部依赖（基于现有教程）
1. **Agentic AI设计模式**：反思、工具使用、规划、多智能体
2. **教程代码示例**：第5章多智能体系统实现
3. **评估方法**：第4章评估体系构建

## 验收标准

### 功能验收
- [ ] 给定完整输入，能生成2000字以上的小说章节
- [ ] 生成章节与大纲、人物设定一致
- [ ] 章节有明显剧情冲突和情感起伏
- [ ] 支持指定输出格式（文本/JSON）
- [ ] "三板斧"机制有效（无水、无崩人设、无OOC）

### 技术验收
- [ ] 多Agent架构运行稳定
- [ ] 错误处理完善，不会因单点故障崩溃
- [ ] 性能达标（单章生成<3分钟）
- [ ] 代码符合PEP8规范，有完整注释
- [ ] 测试覆盖率>70%

### 文档验收
- [ ] README完整，包含快速开始指南
- [ ] API文档清晰
- [ ] 示例代码可运行
- [ ] 部署配置说明完整

## 下一步行动

1. **确认目标**：用户确认本项目目标文档
2. **开始实施**：按照开发计划开始编码
3. **定期检查**：每周检查进度，调整计划
4. **用户反馈**：关键节点获取用户反馈
5. **交付验收**：完成所有验收标准后交付

---
*最后更新：2025-12-24*
*基于与用户的多次沟通和现有Agentic AI教程分析*